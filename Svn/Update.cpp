///////////////////////////////////////////////////////////////////////////////
// Application : MoleSVN
// Package     : Svn
// File        : Update.cpp
// Description : implements the Update command class
// Author      : cedric.bresson@artcoder.com
#include "Update.h"
#include "../UI/ResultsWindow.h"


using namespace std;

///////////////////////////////////////////////////////////////////////////////
// -- Life-cycle
///////////////////////////////////////////////////////////////////////////////
Update::Update()
:SvnCommand("Update", MSG_Update, R_Update)
{
	TRACE_METHOD ((CC_APPLICATION, REPORT_METHOD));
}

Update::~Update()
{
	TRACE_METHOD ((CC_APPLICATION, REPORT_METHOD));
}


///////////////////////////////////////////////////////////////////////////////
// -- Services
///////////////////////////////////////////////////////////////////////////////
void Update::Execute()
{
	TRACE_METHOD ((CC_APPLICATION, REPORT_METHOD));
	
	ResultsWindow* pWindow = new ResultsWindow(GetName());
	m_pTarget = pWindow;
	
	int nError = ExecuteSvn(string("svn update"));
	TRACE_SIMPLE ((CC_APPLICATION, CR_INFO, "Execute error = %d", nError));

	if(nError)
	{
		ShowErrorWindow(string("update failed"));
		pWindow->Quit();
	}
}


///////////////////////////////////////////////////////////////////////////////
// -- Accessors
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
// -- Private
///////////////////////////////////////////////////////////////////////////////
